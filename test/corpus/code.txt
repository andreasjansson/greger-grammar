==================
Single backtick code
==================

# USER

Foo `bar` baz

# ASSISTANT

Single backtick should only `parse code in a single line. If there's no closing backtick it should parse the remainder of the line as code.

This new line is just text

Backtick at end of line should not make subsequent lines code: `

# USER

hello

---

(source_file
  (user
    (user_header)
    (text)
    (code
      (code_backticks)
      (code_contents)
      (code_backticks))
    (text))
  (assistant
    (assistant_header)
    (text)
    (code
      (code_backticks)
      (code_contents)
      (code_backticks))
    (text)
    (code
      (code_backticks)
      (code_contents)
      (code_backticks))
    (text))
  (user
    (user_header)
    (text)))

=======================
Double backticks no language
=======================

# ASSISTANT

`` ` ``

More text after.

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_contents)
      (code_backticks))
    (text)))

===============================
Triple backticks no language
===============================

# ASSISTANT

```
multi
line
code
```

More text after.

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_contents)
      (code_backticks))
    (text)))

==============================
Triple backticks with language
==============================

# ASSISTANT

```python
def hello():
    print("world")
```

More text after.

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_language)
      (code_contents)
      (code_backticks))
    (text)))

=========================================
Triple backticks with invalid language (has spaces)
=========================================

# ASSISTANT

```python stuff
def hello():
    print("world")
```

More text after.

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_contents)
      (code_backticks))
    (text)))

===============================
Quadruple backticks with language
===============================

# ASSISTANT

````rust
fn main() {
    println!("Hello with ``` inside");
}
````

More text after.

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_language)
      (code_contents)
      (code_backticks))
    (text)))

===============================
Triple backticks inline with language
===============================

# ASSISTANT

```javascript console.log("hello")```

More text after.

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_language)
      (code_contents)
      (code_backticks))
    (text)))

===============================
Triple backticks language with numbers and symbols
===============================

# ASSISTANT

```c++
#include <iostream>
```

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_language)
      (code_contents)
      (code_backticks))))

===============================
Empty code blocks
===============================

# ASSISTANT

`````

More text.

---

(source_file
  (assistant
    (assistant_header)
    (code
      (code_backticks)
      (code_contents)
      (code_backticks))
    (text)))
